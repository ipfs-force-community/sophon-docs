(window.webpackJsonp=window.webpackJsonp||[]).push([[106],{486:function(e,t,a){"use strict";a.r(t);var s=a(17),r=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h2",{attrs:{id:"venus-market-v2-master部署指南"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#venus-market-v2-master部署指南"}},[e._v("#")]),e._v(" venus-market-v2 master部署指南")]),e._v(" "),a("p",[e._v("venus-market v2支持两种运行模式")]),e._v(" "),a("ul",[a("li",[e._v("作为链服务运行模式")]),e._v(" "),a("li",[e._v("作为独立组件运行模式")])]),e._v(" "),a("p",[e._v("链服务提供者需要搭建一个venus-market, 为其下的多个旷工提供存储市场的服务时, 需要venus-market工作在链服务模式,如果你是一个旷工, 只想搭建一个简单的服务, 单独为自己提供存储市场的服务, 请参考"),a("RouterLink",{attrs:{to:"/zh/market/using-venus-market-for-miner.html"}},[e._v("venus-market v2 for miner")])],1),e._v(" "),a("h3",{attrs:{id:"全局配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#全局配置"}},[e._v("#")]),e._v(" 全局配置")]),e._v(" "),a("p",[e._v("全局配置对于独立运行模式和链服务组件模式都完全一样, 请参考独立运行模式中的"),a("RouterLink",{attrs:{to:"/zh/market/using-venus-market-for-miner.html#全局配置"}},[e._v("全局配置")])],1),e._v(" "),a("h3",{attrs:{id:"启动venus-market"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#启动venus-market"}},[e._v("#")]),e._v(" 启动venus-market")]),e._v(" "),a("p",[e._v("venus-market作为云服务组件来启动时,需要配置")]),e._v(" "),a("ul",[a("li",[e._v("venus 全节点, 对应命令行的"),a("code",[e._v("node-url")])]),e._v(" "),a("li",[e._v("venus-messager组件服务,对应命令行"),a("code",[e._v("messager-url")])]),e._v(" "),a("li",[e._v("venus-auth组件服务,对应命令行"),a("code",[e._v("auth-url")])]),e._v(" "),a("li",[e._v("venus-gateway组件服务(作为签名服务),对应命令行"),a("code",[e._v("signer-url")])]),e._v(" "),a("li",[e._v("auth-token 用于venus-market在云服务中访问其它组件时验证权限的token")])]),e._v(" "),a("p",[e._v("💁"),a("strong",[e._v(":对于market作为云服务组件启动的情况,所有请求权限的验证都是通过venu-auth来进行, 设置"),a("code",[e._v("auth-token")]),e._v("就可以了.")])]),e._v(" "),a("h4",{attrs:{id:"token配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#token配置"}},[e._v("#")]),e._v(" token配置")]),e._v(" "),a("p",[a("code",[e._v("auth-token")]),e._v("项,是从venus-auth服务上获取,用于market访问其它云组件时验证权限.可以使用已经存在的token, 或者创建新的token.")]),e._v(" "),a("ul",[a("li",[e._v("查看venus-auth已授权token:")])]),e._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("./venus-auth token list\nnum\tname\t\tperm\t\tcreateTime\t\ttoken\n"),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),e._v("\t"),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("200")]),e._v("-22\t\tsign\t"),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("2021")]),e._v("-11-11 "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("17")]),e._v(":31:46\teyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoiMjAwLTIyIiwicGVybSI6InNpZ24iLCJleHQiOiIifQ.15iGGy1YOr02GOjCNV7PDnO6D5gw1DJi6l16I1UwHAg\n"),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("2")]),e._v("\t"),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("200")]),e._v("-27\t\tsign\t"),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("2021")]),e._v("-11-09 03:18:46\teyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoiMjAwLTI3IiwicGVybSI6InNpZ24iLCJleHQiOiIifQ.un57v1L1_6gwFrJEdrGuFJ5HnSD4DbhH59EAMIJMu18\n")])])]),a("ul",[a("li",[e._v("创建新token")])]),e._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("./venus-auth token gen token-02 --perm admin\ngenerate token success: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoidG9rZW4tMDIiLCJwZXJtIjoicmVhZCIsImV4dCI6IiJ9.hgFSVZmWlqsf_H10bs7iTp7iNLh5uc3ItLsAAq3_EBc\n")])])]),a("h4",{attrs:{id:"命令行指定参数启动"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#命令行指定参数启动"}},[e._v("#")]),e._v(" 命令行指定参数启动")]),e._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("./venus-market pool-run "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n--node-url"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("/ip4/192.168.200.21/tcp/3453/ "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n--auth-url"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("http://192.168.200.21:8989 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n--gateway-url"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("/ip4/192.168.200.21/tcp/45132/ "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n--messager-url"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("/ip4/192.168.200.21/tcp/39812/ "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n--auth-token"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoiemwiLCJwZXJtIjoiYWRtaW4iLCJleHQiOiIifQ.3u-PInSUmX-8f6Z971M7JBCHYgFVQrvwUjJfFY03ouQ "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n--piecestorage"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("fs:/path/pieces_solo\n")])])]),a("h4",{attrs:{id:"通过配置文件指定参数启动"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#通过配置文件指定参数启动"}},[e._v("#")]),e._v(" 通过配置文件指定参数启动")]),e._v(" "),a("p",[e._v("当第一次启动时venus-market时,按"),a("a",{attrs:{href:"#%E5%91%BD%E4%BB%A4%E8%A1%8C%E6%8C%87%E5%AE%9A%E5%8F%82%E6%95%B0%E5%90%AF%E5%8A%A8"}},[e._v("命令行指定启动参数")]),e._v("后, 配置文件的对应项看起来是这样的.")]),e._v(" "),a("div",{staticClass:"language-yuml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('[Node]\n  Url = "/ip4/192.168.200.21/tcp/3453/"\n  Token = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoiemwiLCJwZXJtIjoiYWRtaW4iLCJleHQiOiIifQ.3u-PInSUmX-8f6Z971M7JBCHYgFVQrvwUjJfFY03ouQ"\n[Messager]\n  Url = "/ip4/192.168.200.21/tcp/39812/"\n  Token = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoiemwiLCJwZXJtIjoiYWRtaW4iLCJleHQiOiIifQ.3u-PInSUmX-8f6Z971M7JBCHYgFVQrvwUjJfFY03ouQ"\n[Signer]\n  Type = "gateway"\n  Url = "/ip4/192.168.200.21/tcp/45132/"\n  Token = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoiemwiLCJwZXJtIjoiYWRtaW4iLCJleHQiOiIifQ.3u-PInSUmX-8f6Z971M7JBCHYgFVQrvwUjJfFY03ouQ"\n[AuthNode]\n  Url = "http://192.168.200.21:8989"\n  Token = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoiemwiLCJwZXJtIjoiYWRtaW4iLCJleHQiOiIifQ.3u-PInSUmX-8f6Z971M7JBCHYgFVQrvwUjJfFY03ouQ"\n')])])]),a("p",[e._v("同时, 也可以在后续的操作中通过修改配置文件来指定启动参数,如果配置文件都正确,只需要用下面这样简单的命令来启动venus-market:")]),e._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("./venus-market run\n")])])]),a("h3",{attrs:{id:"使用market为miner挂单"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用market为miner挂单"}},[e._v("#")]),e._v(" 使用market为miner挂单")]),e._v(" "),a("p",[e._v("market以链服务方式启动, 不需要设置默认miner(market会自动从gateway取得),通过命令查看miner信息:")]),e._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("./venus-market actor list                                                                \nminer                                                                                   account\nt01041                                                                                  BY\nt01051                                                                                  zl\n")])])]),a("p",[e._v("从上面的列表中可以看到, 此时market可以同时为多个注册到链服务中的旷工进行服务.")]),e._v(" "),a("p",[e._v("之后的操作与独立模式启动完全一样,可以参考"),a("RouterLink",{attrs:{to:"/zh/market/using-venus-market-for-miner.html#使用market为miner挂单"}},[e._v("market为miner挂单")])],1),e._v(" "),a("h3",{attrs:{id:"使用market-client开始存储订单"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用market-client开始存储订单"}},[e._v("#")]),e._v(" 使用market-client开始存储订单")]),e._v(" "),a("p",[e._v("market-client的使用与venus-market以独立方式运行还是链服务方式运行没有关系,所以可以参考"),a("RouterLink",{attrs:{to:"/zh/market/using-venus-market-for-miner.html#使用market-client开始存储订单"}},[e._v("market-client开始存储订单")])],1),e._v(" "),a("h3",{attrs:{id:"venus-sealer封装扇区"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#venus-sealer封装扇区"}},[e._v("#")]),e._v(" venus-sealer封装扇区")]),e._v(" "),a("p",[e._v("参考"),a("RouterLink",{attrs:{to:"/zh/market/using-venus-market-for-miner.html#venus-sealer封装扇区"}},[e._v("venus-sealer封装扇区")])],1)])}),[],!1,null,null,null);t.default=r.exports}}]);