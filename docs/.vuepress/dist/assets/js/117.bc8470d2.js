(window.webpackJsonp=window.webpackJsonp||[]).push([[117],{494:function(s,t,e){"use strict";e.r(t);var a=e(17),n=Object(a.a)({},(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"venus-auth"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#venus-auth"}},[s._v("#")]),s._v(" Venus Auth")]),s._v(" "),e("p",[s._v("venus-auth 是venus集群统一授权服务")]),s._v(" "),e("ul",[e("li",[s._v("权限验证")]),s._v(" "),e("li",[s._v("Trace 采集")]),s._v(" "),e("li",[s._v("RESTful API")]),s._v(" "),e("li",[s._v("管理用户及请求限流信息")])]),s._v(" "),e("h2",{attrs:{id:"快速启动"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#快速启动"}},[s._v("#")]),s._v(" 快速启动")]),s._v(" "),e("h3",{attrs:{id:"下载代码"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#下载代码"}},[s._v("#")]),s._v(" 下载代码")]),s._v(" "),e("div",{staticClass:"language-shell script extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clone https://github.com/filecoin-project/venus-auth.git\n")])])]),e("h3",{attrs:{id:"编译"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#编译"}},[s._v("#")]),s._v(" 编译")]),s._v(" "),e("div",{staticClass:"language-shell script extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v("\n")])])]),e("h3",{attrs:{id:"启动服务"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#启动服务"}},[s._v("#")]),s._v(" 启动服务")]),s._v(" "),e("div",{staticClass:"language-shell script extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("./venus-auth run\n")])])]),e("h2",{attrs:{id:"配置文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置文件"}},[s._v("#")]),s._v(" 配置文件")]),s._v(" "),e("blockquote",[e("p",[s._v("默认会在 ~/.venus-auth/config.tml 生成配置文件")])]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('# 服务使用端口\nPort = "8989"\nReadTimeout = "1m"\nWriteTimeout = "1m"\nIdleTimeout = "1m"\n\n[db]\n  # 支持: badger (默认), mysql\n  type = "badger"\n  # 以下参数适用于MySQL\n  DSN = "rennbon:111111@(127.0.0.1:3306)/auth_server?parseTime=true&loc=Local&charset=utf8mb4&collation=utf8mb4_unicode_ci&readTimeout=10s&writeTimeout=10s"\n  # conns 1500 concurrent\n  maxOpenConns = 64\n  maxIdleConns = 128\n  maxLifeTime = "120s"\n  maxIdleTime = "30s"\n\n[log]\n  # trace,debug,info,warning,error,fatal,panic\n  # 默认日志级别\n  logLevel = trace\n  # db type, 1:influxDB\n  type = 1\n  # db hook switch\n  hookSwitch = true\n\n[Trace]\n  # 是否启用 trace\n  JaegerTracingEnabled = true\n  # 收集的频率\n  ProbabilitySampler = 1.0\n  JaegerEndpoint = "127.0.0.1:6831"\n  ServerName = "venus-auth"\n')])])]),e("h2",{attrs:{id:"cli-操作指南"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#cli-操作指南"}},[s._v("#")]),s._v(" CLI 操作指南")]),s._v(" "),e("h3",{attrs:{id:"查看帮助"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#查看帮助"}},[s._v("#")]),s._v(" 查看帮助")]),s._v(" "),e("div",{staticClass:"language-shell script extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("./venus-auth -h\n\nNAME:\n   venus-auth - A new cli application\n\nUSAGE:\n   venus-auth "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("global options"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("command")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("command options"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("arguments"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("."),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\nVERSION:\n   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v(".0"),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'+b502a60'")]),s._v("\n\nCOMMANDS:\n   run      run venus-auth daemon\n   token    token "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("command")]),s._v("\n   user     user "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("command")]),s._v("\n   help, h  Shows a list of commands or "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("help")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" one "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("command")]),s._v("\n\nGLOBAL OPTIONS:\n   --config value, -c value  config "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("dir")]),s._v(" path\n   --help, -h                show "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("help")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("default: "),e("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n   --version, -v             print the version "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("default: "),e("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),e("h3",{attrs:{id:"venus-auth-基础操作"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#venus-auth-基础操作"}},[s._v("#")]),s._v(" venus auth 基础操作")]),s._v(" "),e("h4",{attrs:{id:"token-相关"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#token-相关"}},[s._v("#")]),s._v(" token 相关")]),s._v(" "),e("ol",[e("li",[s._v("生成token")])]),s._v(" "),e("div",{staticClass:"language-shell script extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("./venus-auth token gen --perm admin testminer\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# res")]),s._v("\ngenerate token success: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoidGVzdG1pbmVyIiwicGVybSI6ImFkbWluIiwiZXh0IjoiIn0.8yNodOcALJ8fy4h-Hh5yLfaR27cD4a8ePd9BkmWlfEo\n")])])]),e("ol",{attrs:{start:"2"}},[e("li",[s._v("列出 token")])]),s._v(" "),e("div",{staticClass:"language-shell script extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# show help")]),s._v("\n./venus-auth token list -h\nNAME:\n   venus-auth token list - list token info\n\nUSAGE:\n   venus-auth token list "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("command options"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("arguments"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("."),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\nOPTIONS:\n   --skip value   "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("default: "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n   --limit value  max value:100 "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("default: "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("default: "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n   --help, -h     show "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("help")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("default: "),e("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n./venus-auth token list\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# res")]),s._v("\nnum    name             perm    createTime              token\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("      testminer1       "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("read")]),s._v("    "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("-05-27 "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(":33:24     eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoidGVzdG1pbmVyIiwicGVybSI6InJlYWQiLCJleHQiOiIifQ.7BRN8IXzK9Gpe35OPgCelTC79UuirgM23mO7fHxKr2Q\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("      testminer2       sign    "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("-05-27 "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(":33:15     eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoidGVzdG1pbmVyIiwicGVybSI6InNpZ24iLCJleHQiOiIifQ.D_IFz2qZjFRkLJEzmv4HkZ3rZxukYoYZXEjlBKZmGOA\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("      testminer3       admin   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("-07-21 "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(":46:29     eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoidGVzdG1pbmVyIiwicGVybSI6ImFkbWluIiwiZXh0IjoiIn0.8yNodOcALJ8fy4h-Hh5yLfaR27cD4a8ePd9BkmWlfEo\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("      testminer4       admin   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("-05-27 "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(":33:19     eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoidGVzdG1pbmVyIiwicGVybSI6ImFkbWluIiwiZXh0IjoiIn0.oakIfSg1Iiv1T2F1BtH1bsb_1GeXWuirdPSjvE5wQLs\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("      testminer5       "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("write")]),s._v("   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("-05-27 "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(":33:29     eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoidGVzdG1pbmVyIiwicGVybSI6IndyaXRlIiwiZXh0IjoiIn0.yVC2lZlmBQAxThTt0pLXH9cZgUZuuM6Us19aUw4DWNQ\n")])])]),e("ol",{attrs:{start:"3"}},[e("li",[s._v("查询 token")])]),s._v(" "),e("blockquote",[e("p",[s._v("./venus-auth token get --name [name] or --token [token]")])]),s._v(" "),e("div",{staticClass:"language-shell script extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("./venus-auth token get --name testminer2\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# res")]),s._v("\nname:        testminer2\nperm:        sign\ncreate time: "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("-05-27 "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(":33:15 +0800 CST\ntoken:       eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoidGVzdG1pbmVyIiwicGVybSI6InNpZ24iLCJleHQiOiIifQ.D_IFz2qZjFRkLJEzmv4HkZ3rZxukYoYZXEjlBKZmGOA\n")])])]),e("ol",{attrs:{start:"4"}},[e("li",[s._v("删除 token")])]),s._v(" "),e("div",{staticClass:"language-shell script extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("./venus-auth token "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoidGVzdG1pbmVyIiwicGVybSI6ImFkbWluIiwiZXh0IjoiIn0.8yNodOcALJ8fy4h-Hh5yLfaR27cD4a8ePd9BkmWlfEo\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# res")]),s._v("\nremove token success: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoidGVzdG1pbmVyIiwicGVybSI6ImFkbWluIiwiZXh0IjoiIn0.8yNodOcALJ8fy4h-Hh5yLfaR27cD4a8ePd9BkmWlfEo\n")])])]),e("ol",{attrs:{start:"5"}},[e("li",[s._v("恢复 token")])]),s._v(" "),e("div",{staticClass:"language-shell script extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("./venus-auth token recover eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoidGVzdG1pbmVyIiwicGVybSI6ImFkbWluIiwiZXh0IjoiIn0.8yNodOcALJ8fy4h-Hh5yLfaR27cD4a8ePd9BkmWlfEo\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# res")]),s._v("\nrecover token success: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoidGVzdG1pbmVyIiwicGVybSI6ImFkbWluIiwiZXh0IjoiIn0.8yNodOcALJ8fy4h-Hh5yLfaR27cD4a8ePd9BkmWlfEo\n")])])]),e("h4",{attrs:{id:"user-相关"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#user-相关"}},[s._v("#")]),s._v(" user 相关")]),s._v(" "),e("ol",[e("li",[s._v("增加 user")])]),s._v(" "),e("div",{staticClass:"language-shell script extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("./venus-auth user "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v("  testminer2\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# res")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" user success: f29d524a-1589-4784-b934-5b3432290f79, next can "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" miner "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" this user\n")])])]),e("ol",{attrs:{start:"2"}},[e("li",[s._v("查询 user")])]),s._v(" "),e("div",{staticClass:"language-shell script extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("./venus-auth user get testminer2\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# res")]),s._v("\nname: testminer2\nsourceType: "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("   // miner:1\nstate "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("         // "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(": disable, "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(": "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v("\ncomment:\ncreateTime: Wed, "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" Jul "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(":56:50 CST\nupdateTime: Wed, "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" Jul "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(":56:50 CST\n")])])]),e("ol",{attrs:{start:"3"}},[e("li",[s._v("列出 user")])]),s._v(" "),e("div",{staticClass:"language-shell script extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# show help")]),s._v("\n./venus-auth user list -h\nNAME:\n   venus-auth user list - list "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("users")]),s._v("\n\nUSAGE:\n   venus-auth user list "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("command options"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("arguments"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("."),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\nOPTIONS:\n   --skip value        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("default: "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n   --limit value       "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("default: "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n   --state value       "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("default: "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n   --sourceType value  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("default: "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n   --help, -h          show "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("help")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("default: "),e("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n./venus-auth user list\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# res")]),s._v("\nnumber: "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nname: testminer\nsourceType: "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("   // miner:1\nstate "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("         // "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(": disable, "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(": "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v("\ncomment: "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v("\ncreateTime: Mon, "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("31")]),s._v(" May "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(":41:55 CST\nupdateTime: Mon, "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("31")]),s._v(" May "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(":41:55 CST\n\nnumber: "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\nname: li_sealer\nsourceType: "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("   // miner:1\nstate "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("         // "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(": disable, "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(": "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v("\ncomment: li\ncreateTime: Tue, 01 Jun "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(":35:35 CST\nupdateTime: Tue, 01 Jun "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(":35:35 CST\n")])])]),e("ol",{attrs:{start:"4"}},[e("li",[s._v("更新 user")])]),s._v(" "),e("div",{staticClass:"language-shell script extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# show help")]),s._v("\n./venus-auth user udpate -h\nNAME:\n   venus-auth user update - update user\n\nUSAGE:\n   venus-auth user update "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("command options"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("arguments"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("."),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\nOPTIONS:\n   --name value\n   --comment value\n   --sourceType value  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("default: "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n   --state value       "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("default: "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n   --help, -h          show "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("help")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("default: "),e("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n./venus-auth user update --name testminer2 --state "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# res")]),s._v("\nupdate user success\n")])])]),e("ol",{attrs:{start:"5"}},[e("li",[s._v("查询 miner 是否存在")])]),s._v(" "),e("div",{staticClass:"language-shell script extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("./venus-auth user has f01570\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# res")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n")])])]),e("ol",{attrs:{start:"6"}},[e("li",[s._v("激活 user")])]),s._v(" "),e("div",{staticClass:"language-shell script extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("./venus-auth user active testminer2\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# res")]),s._v("\nactive user success\n")])])]),e("ol",{attrs:{start:"7"}},[e("li",[s._v("删除 user")])]),s._v(" "),e("div",{staticClass:"language-shell script extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("./venus-auth user "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" testminer2\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# res")]),s._v("\nremove user success\n")])])]),e("ol",{attrs:{start:"8"}},[e("li",[s._v("恢复 user")])]),s._v(" "),e("div",{staticClass:"language-shell script extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("./venus-auth user recover testminer2\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# res")]),s._v("\nrecover user success\n")])])]),e("h4",{attrs:{id:"miner-相关"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#miner-相关"}},[s._v("#")]),s._v(" miner 相关")]),s._v(" "),e("ol",[e("li",[s._v("增加矿工")])]),s._v(" "),e("div",{staticClass:"language-shell script extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("./venus-auth user miner testminer2 f010101\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# res")]),s._v("\ncreate user:testminer2 miner:f010101 success.\n")])])]),e("ol",{attrs:{start:"2"}},[e("li",[s._v("列出用户的下的矿工")])]),s._v(" "),e("div",{staticClass:"language-shell script extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("./venus-auth user miner list testminer2\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# res")]),s._v("\nuser: testminer2, miner count:1\nidx  miner    create-time                    \n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("    f010101  Tue, "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),s._v(" May "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(":58:49 CST \n")])])]),e("ol",{attrs:{start:"3"}},[e("li",[s._v("删除矿工")])]),s._v(" "),e("div",{staticClass:"language-shell script extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("./venus-auth user miner "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" f010101\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# res")]),s._v("\nremove miner:f010101 success.\n")])])]),e("h4",{attrs:{id:"用户请求限流相关"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#用户请求限流相关"}},[s._v("#")]),s._v(" 用户请求限流相关")]),s._v(" "),e("div",{staticClass:"language-shell script extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("./venus-auth user rate-limit -h\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# res")]),s._v("\nNAME:\n   venus-auth user rate-limit - A new cli application\n\nUSAGE:\n   venus-auth user rate-limit "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("command")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("command options"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("arguments"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("."),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\nCOMMANDS:\n   "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v("      "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" user request rate limit\n   update   update user request rate limit\n   get      get user request rate limit\n   del      delete user request rate limit\n   help, h  Shows a list of commands or "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("help")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" one "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("command")]),s._v("\n\nOPTIONS:\n   --help, -h  show "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("help")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("default: "),e("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),e("ol",[e("li",[s._v("增加请求限流")])]),s._v(" "),e("div",{staticClass:"language-shell script extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# show help")]),s._v("\nAME:\n   venus-auth user rate-limit "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" - "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" user request rate limit\n\nUSAGE:\n   venus-auth user rate-limit "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("command options"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" user rate-limit "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("name"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("limitAmount"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("duration"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("2h, 1h:20m, 2m10s"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\nOPTIONS:\n   --id value  rate limit "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("id")]),s._v(" to update\n   --help, -h  show "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("help")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("default: "),e("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n./venus-auth user rate-limit "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" testminer2 "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" 1m\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# res")]),s._v("\nupsert user rate limit success: dee7e326-3b8b-4e38-9de7-1bee9bdffa9d\n")])])]),e("ol",{attrs:{start:"2"}},[e("li",[s._v("更新请求限流")])]),s._v(" "),e("div",{staticClass:"language-shell script extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("./venus-auth user rate-limit update testminer2 dee7e326-3b8b-4e38-9de7-1bee9bdffa9d "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v(" 1m\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# res")]),s._v("\nupsert user rate limit success: dee7e326-3b8b-4e38-9de7-1bee9bdffa9d\n")])])]),e("ol",{attrs:{start:"3"}},[e("li",[s._v("查新请求限流")])]),s._v(" "),e("div",{staticClass:"language-shell script extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("./venus-auth user rate-limit get testminer2\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# res")]),s._v("\nuser:testminer2, limit id:dee7e326-3b8b-4e38-9de7-1bee9bdffa9d, request limit amount:100, duration:0.02"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("h"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),e("ol",{attrs:{start:"4"}},[e("li",[s._v("删除请求限流")])]),s._v(" "),e("div",{staticClass:"language-shell script extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("./venus-auth user rate-limit del testminer2 dee7e326-3b8b-4e38-9de7-1bee9bdffa9d\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# res")]),s._v("\ndelete rate limit success, dee7e326-3b8b-4e38-9de7-1bee9bdffa9d\n")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);