(window.webpackJsonp=window.webpackJsonp||[]).push([[66],{450:function(a,s,t){"use strict";t.r(s);var e=t(17),r=Object(e.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"入门"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#入门"}},[a._v("#")]),a._v(" 入门")]),a._v(" "),t("p",[a._v("这是安装和运行 Filecoin 节点并连接到本地机器测试网络的指南。")]),a._v(" "),t("h3",{attrs:{id:"系统要求"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#系统要求"}},[a._v("#")]),a._v(" 系统要求")]),a._v(" "),t("p",[a._v("Venus可以在大多数GNU/Linux和MacOS系统上构建和运行。尚不支持Windows。")]),a._v(" "),t("p",[a._v("验证节点可以在大多数具有至少 8GB RAM 的系统上运行。挖矿节点需要大量的 RAM 和 GPU 资源，这取决于正在使用的扇区配置。")]),a._v(" "),t("h3",{attrs:{id:"安装依赖项和系统配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装依赖项和系统配置"}},[a._v("#")]),a._v(" 安装依赖项和系统配置")]),a._v(" "),t("p",[a._v("从 Git 下载 "),t("code",[a._v("venus")]),a._v(" 代码：")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("mkdir")]),a._v(" -p /path/to/filecoin-project\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("git")]),a._v(" clone https://github.com/filecoin-project/venus.git /path/to/filecoin-project/venus\n")])])]),t("h4",{attrs:{id:"安装-go"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装-go"}},[a._v("#")]),a._v(" 安装 Go")]),a._v(" "),t("p",[t("code",[a._v("venus")]),a._v(" 的构建过程需要 "),t("a",{attrs:{href:"https://golang.org/doc/install",target:"_blank",rel:"noopener noreferrer"}},[a._v("Go"),t("OutboundLink")],1),a._v(" >= v1.17。")]),a._v(" "),t("blockquote",[t("p",[a._v("第一次安装 Go？我们推荐 "),t("a",{attrs:{href:"https://www.ardanlabs.com/blog/2016/05/installing-go-and-your-workspace.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("这个教程"),t("OutboundLink")],1),a._v(" 其中包括环境设置。")])]),a._v(" "),t("p",[a._v("由于"),t("code",[a._v("venus")]),a._v("中使用了"),t("code",[a._v("cgo")]),a._v("，因此无论是使用预构建库还是从源代码处编译，都需要一个 C 编译器来构建它。要使用 "),t("code",[a._v("gcc")]),a._v(" （例如"),t("code",[a._v("export CC=gcc")]),a._v("），需要 v7.4.0 或更高版本。")]),a._v(" "),t("p",[a._v("构建过程将下载一个静态库，其中包含"),t("a",{attrs:{href:"https://github.com/filecoin-project/rust-fil-proofs",target:"_blank",rel:"noopener noreferrer"}},[a._v("Filecoin Proof 的实现"),t("OutboundLink")],1),a._v(" (用 Rust 写的)。")]),a._v(" "),t("blockquote",[t("p",[t("strong",[a._v("注意：")]),a._v(" 要从源代码生成证明，（1）必须安装 Rust 开发环境，（2）必须设置环境变量 "),t("code",[a._v("FFI_BUILD_FROM_SOURCE=1")]),a._v(" 更多信息可在"),t("a",{attrs:{href:"https://github.com/filecoin-project/filecoin-ffi",target:"_blank",rel:"noopener noreferrer"}},[a._v("filecoin-ffi"),t("OutboundLink")],1),a._v("中找到。")])]),a._v(" "),t("h4",{attrs:{id:"安装依赖项"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装依赖项"}},[a._v("#")]),a._v(" 安装依赖项")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("make")]),a._v(" deps\n")])])]),t("blockquote",[t("p",[t("strong",[a._v("注意：")]),a._v(" 第一次"),t("code",[a._v("deps")]),a._v(" 启动可能"),t("strong",[a._v("慢")]),a._v("，因为需要下载和编译 "),t("code",[a._v("filecoin-ffi")]),a._v("。")])]),a._v(" "),t("h3",{attrs:{id:"构建和运行测试"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#构建和运行测试"}},[a._v("#")]),a._v(" 构建和运行测试")]),a._v(" "),t("ol",[t("li",[a._v("构建二进制文件：")])]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("make")]),a._v("\n")])])]),t("ol",{attrs:{start:"2"}},[t("li",[a._v("运行单元测试：")])]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("make")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("test")]),a._v("\n")])])]),t("p",[a._v("更多构建和测试命令请查看"),t("code",[a._v("Makefile")]),a._v("。")]),a._v(" "),t("h2",{attrs:{id:"开始运行-filecoin"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#开始运行-filecoin"}},[a._v("#")]),a._v(" 开始运行 Filecoin")]),a._v(" "),t("ol",[t("li",[a._v("如果以前在系统上运行过"),t("code",[a._v("venus")]),a._v(" ，请删除现有的 Filecoin repo（"),t("strong",[a._v("这将删除所有以前的 Filecoin 数据")]),a._v("）：")])]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("rm")]),a._v(" -rf ~/.venus\n")])])]),t("ol",{attrs:{start:"2"}},[t("li",[a._v("启动 venus 守护进程：")])]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[a._v("venus daemon\n")])])]),t("p",[a._v("这应该返回“我的 peerID 是"),t("code",[a._v("<peerID>")]),a._v("” , 其中 "),t("code",[a._v("<peerID>")]),a._v(" 是一个长的 "),t("a",{attrs:{href:"https://github.com/filecoin-project/specs/blob/master/definitions.md#cid",target:"_blank",rel:"noopener noreferrer"}},[a._v("CID"),t("OutboundLink")],1),a._v(" ，是以“Qm”开头的字符串。")]),a._v(" "),t("ol",{attrs:{start:"3"}},[t("li",[a._v("检查节点的连接：")])]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[a._v("venus swarm peers                  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# list addresses of peers to which you're connected")]),a._v("\n")])])]),t("p",[a._v("该节点现在应该连接到一些 peer，并将开始下载和验证区块链。")]),a._v(" "),t("blockquote",[t("p",[t("strong",[a._v("注意：")]),a._v(" 守护进程现在正在自己的终端中无限期运行 ("),t("code",[a._v("Ctrl + C")]),a._v(" 退出)。要运行其他"),t("code",[a._v("venus")]),a._v(" 命令，请打开第二个终端选项卡或窗口 (在 Mac 上是 "),t("code",[a._v("Cmd + T")]),a._v(")。")])]),a._v(" "),t("h2",{attrs:{id:"从-filecoin-水龙头获取-fil"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#从-filecoin-水龙头获取-fil"}},[a._v("#")]),a._v(" 从 Filecoin 水龙头获取 FIL")]),a._v(" "),t("p",[t("strong",[a._v("一旦你的链完成同步")]),a._v(", 你将可以使用水龙头获得 filecoin 代币（FIL）。在 Filecoin 节点可以参与市场之前需要一些启动文件，客户需要在他们的帐户中输入 FIL，以便与矿工进行存储交易。矿工在最初向网络抵押存储时使用 FIL 作为抵押品。")]),a._v(" "),t("p",[a._v("在早期测试中，可以从 Filecoin 水龙头获得模拟的测试 FIL。“水龙头”之所以得名，是因为它能把 FIL 发放到那些把钱包放在它下面的人。使用模拟的测试 FIL 可以对市场动态进行初步测试，而无需任何真实资金。")]),a._v(" "),t("p",[a._v("FIL 的所有余额都存放在钱包里。新创建节点时，它将有一个余额为 0 FIL 的 Filecoin 钱包。")]),a._v(" "),t("ol",[t("li",[a._v("检索您的钱包地址：")])]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[a._v("venus wallet "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("ls")]),a._v("\n")])])]),t("ol",{attrs:{start:"2"}},[t("li",[t("p",[a._v("输出的应该是一个长的字母数字字符串。转到 testnet 的 "),t("a",{attrs:{href:"https://faucet.calibration.fildev.network/",target:"_blank",rel:"noopener noreferrer"}},[a._v("水龙头"),t("OutboundLink")],1),a._v(" 并提交那个钱包地址。要花一分钟才能把钱放进钱包。")]),a._v(" "),t("ul",[t("li",[a._v("或者你可以从命令行触发水龙头：")])])])]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("WALLET_ADDR")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")]),a._v("venus wallet "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("ls")]),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")])]),a._v("    "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# fetch your wallet address into a handy variable")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("MESSAGE_CID")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("curl")]),a._v(" -X POST -F "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"address='),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${WALLET_ADDR}")]),a._v('"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"https://faucet.calibration.fildev.network/send"')]),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")])]),a._v("\n")])])]),t("ol",{attrs:{start:"3"}},[t("li",[a._v("水龙头将提供消息 CID。如果链已与网络同步，则此消息应在大约 30 秒内处理。可以运行以下命令以等待确认：")])]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[a._v("venus state wait-msg "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${MESSAGE_CID}")]),a._v("\n")])])]),t("ol",{attrs:{start:"4"}},[t("li",[a._v("通过检查钱包余额验证 FIL 是否已转入钱包中：")])]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[a._v("venus wallet balance "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${WALLET_ADDR}")]),a._v("\n")])])]),t("h2",{attrs:{id:"等待链同步"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#等待链同步"}},[a._v("#")]),a._v(" 等待链同步")]),a._v(" "),t("p",[a._v("🎉 恭喜，您现在已连接到 Filecoin！守护进程现在正忙于同步和验证现有的区块链，这可能需要一段时间---数小时甚至数天，具体取决于网络时间和活动。")]),a._v(" "),t("p",[a._v("在同步初期，一个 CPU 内核上会有激烈的活动。首先通过访问 "),t("a",{attrs:{href:"https://stats.testnet.filecoin.io",target:"_blank",rel:"noopener noreferrer"}},[a._v("网络统计页"),t("OutboundLink")],1),a._v(" 了解当前块的高度，然后观察节点同步进度：")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[a._v("venus "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sync")]),a._v(" status\n")])])]),t("h2",{attrs:{id:"查看网络信息"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看网络信息"}},[a._v("#")]),a._v(" 查看网络信息")]),a._v(" "),t("p",[a._v("有一些可视化工具可以帮助用户了解 Filecoin 网络中正在发生的事情，例如官方的 "),t("a",{attrs:{href:"http://stats.testnet.filecoin.io/",target:"_blank",rel:"noopener noreferrer"}},[a._v("网络统计页面"),t("OutboundLink")],1),a._v(" 以及社区管理的区块浏览器 "),t("a",{attrs:{href:"https://filscan.io",target:"_blank",rel:"noopener noreferrer"}},[a._v("filscan.io"),t("OutboundLink")],1),a._v("。")]),a._v(" "),t("h2",{attrs:{id:"组件默认端口"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#组件默认端口"}},[a._v("#")]),a._v(" 组件默认端口")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("Auth "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("8989")]),a._v("\nGateway "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("45132")]),a._v("\nDaemon node "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("3453")]),a._v("\nMiner "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("12308")]),a._v("\nSealer "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2345")]),a._v("\nWorker "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("3456")]),a._v("\n")])])]),t("p",[a._v("在构建 Venus 各组件过程中可能会产生 RPC 链接问题，可以运行类似 telnet 10.50.110.59 12308 命令测试各组件端口是否打开。")])])}),[],!1,null,null,null);s.default=r.exports}}]);